"use strict";
/*******************************************************************************
 * Licensed Materials - Property of IBM
 * (c) Copyright IBM Corporation 2019. All Rights Reserved.
 *
 * Note to U.S. Government Users Restricted Rights:
 * Use, duplication or disclosure restricted by GSA ADP Schedule
 * Contract with IBM Corp.
 *******************************************************************************/
var __read = (this && this.__read) || function (o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
};
var __spread = (this && this.__spread) || function () {
    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));
    return ar;
};
exports.__esModule = true;
var React = require("react");
var ReactDOM = require("react-dom");
var ResourceTable_1 = require("../components/ResourceTable");
var core_1 = require("@kui-shell/core");
var i18n_1 = require("./i18n");
function renderReact(data, node, command) {
    var uniqueKinds = __spread(new Set(data.items ? data.items.map(function (item) { return item.kind; }) : data.map(function (item) { return item.kind; })));
    var searchResource = function () {
        return (React.createElement("div", { className: 'search--resource' },
            data.related && data.related.length > 0 && command.includes(':')
                ? React.createElement("div", { className: 'related--resource-table-header' },
                    React.createElement("button", { onClick: function () {
                            core_1.getCurrentTab().REPL.pexec(command.replace('search ', 'search related:resources '));
                        }, className: 'related--resource-table-header-button' },
                        React.createElement("div", { className: 'linked-resources' }, i18n_1["default"]('search.label.view.related')),
                        React.createElement("span", { className: 'arrow-right' }, "\u2192")))
                : null,
            uniqueKinds.map(function (kind) { return (React.createElement("div", { className: 'search--resource-table', key: kind.toString() },
                React.createElement(ResourceTable_1["default"], { items: data.items
                        ? data.items.filter(function (item) { return item.kind === kind || item.__type === kind; })
                        : data.filter(function (item) { return item.kind === kind || item.__type === kind; }), kind: kind.toString() }))); })));
    };
    ReactDOM.render(React.createElement(searchResource), node);
    return node;
}
exports["default"] = renderReact;
