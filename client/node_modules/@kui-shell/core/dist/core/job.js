"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const debug_1 = require("debug");
const debug = debug_1.default('webapp/views/jobs');
class WatchableJob {
    constructor(tab, handler, timeout) {
        this.tab = tab;
        this.handler = handler;
        this.timeout = timeout;
    }
    get id() {
        return this._id;
    }
    startWatching(handler, timeout) {
        this._id = setInterval(handler, timeout);
    }
    start() {
        this.startWatching(this.handler, this.timeout);
        this.tab.state.captureJob(this);
        debug(`start job ${this._id} with timeout ${this.timeout}`);
    }
    stopWatching(id) {
        clearInterval(id);
    }
    abort() {
        this.stopWatching(this._id);
        this.tab.state.removeJob(this);
        debug(`stop job ${this._id}`);
    }
}
exports.WatchableJob = WatchableJob;
//# sourceMappingURL=job.js.map